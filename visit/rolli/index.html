<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>Palazzi dei Rolli</title>
<link rel="stylesheet" href="../../script/leaflet.css" />
<script type="text/javascript" src="../../script/leaflet.js"></script>
<script type="text/javascript" src="../../script/map.js"></script>

<script type="text/javascript" src="../../script/underscore-min.js"></script>
<script type="text/javascript" src="../../script/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../script/jquery.geo.min.js"></script>
<script type="text/javascript" src="../../script/jquery.debounce-1.0.5.js"></script>
<link rel="stylesheet" href="../../script/sherlock.css" />

<!-- data -->
<script type="text/javascript" src="rolli.min.js"></script>
</head>

<body class='section-0'>

<div id='pane'>
    <div id='map'></div>
</div>

<article>
  <section id='cover' class='cover active'>
    <h1>Palazzi dei Rolli</h1>
    <p>Patrimonio dell'umanità Unesco</p>
    <small class='scroll'>Scroll con il mouse ▼</small>
  </section>
  <section id='1285143'>
    <h2>Prefettura - Palazzo Doria Spinola</h2>
    <p></p>
  </section>
  <section id='23856074'>
    <h2>Palazzo Clemente della Rovere</h2>
  </section>
  <section id='164425517'>
    <h2>Palazzo Giorgio Spinola</h2>
  </section>
  <section id='164425515'>
    <h2>Palazzo Tomaso Spinola</h2>
  </section>
  <section id='153185249'>
    <h2>Palazzo Giacomo Spinola</h2>
  </section>
  <section id='164570196'>
    <h2>Palazzo Negrone (Agostino Ayrolo)</h2>
  </section>
  <section id='164570452'>
    <h2>Palazzo Paolo Battista e Niccolò Interiano</h2>
  </section>
  <section id='22977613'>
    <h2>Palazzo Pallavicini-Cambiaso (Agostino Pallavicini)</h2>
  </section>
  <section id='22977675'>
    <h2>Palazzo Pantaleo Spinola</h2>
  </section>
  <section id='22977629'>
    <h2>Palazzo Lercari-Parodi (Franco Lercari)</h2>
  </section>
  <section id='22977576'>
    <h2>Palazzo Carrega-Cataldi (Tobia Pallavicini)</h2>
  </section>
  <section id='22977653'>
    <h2>Palazzo Angelo Giovanni Spinola</h2>
  </section>  
  <section id='22977685'>
    <h2>Palazzo Gio Battista Spinola</h2>
  </section>
  <section id='22977884'>
    <h2>Palazzo Podestà (Nicolosio Lomellini)</h2>
  </section>
  <section id='22977705'>
    <h2>Palazzo Cattaneo-Adorno (Lazzaro e Giacomo Spinola)</h2>
  </section>
  <section id='106971508'>
    <h2>Palazzo Doria-Tursi (Nicolò Grimaldi)</h2>
  </section>      
  <section id='22977719'>
    <h2>Palazzo Baldassarre Lomellini</h2>
  </section>  
  <section id='22977475'>
    <h2>Palazzo Bianco (Luca Grimaldi)</h2>
  </section>  
  <section id='22977840'>
    <h2>Palazzo Rosso (Rodolfo e Francesco Brignole Sale)</h2>
  </section>  
  <section id='107717722'>
    <h2>Palazzo Gerolamo Grimaldi</h2>
  </section>  
  <section id='106971520'>
    <h2>Palazzo Gio Carlo Brignole</h2>
  </section>  
  <section id='164570793'>
    <h2>Palazzo Bartolomeo Lomellini</h2>
  </section>  
  <section id='107716422'>
    <h2>Palazzo Lomellini-Doria Lamba (Stefano Lomellini)</h2>
  </section>  
  <section id='164571099'>
    <h2>Palazzo Giacomo Lomellini e Palazzo De Marini-Spinola (Giacomo Lomellini e Cattaneo De Marini)</h2>
  </section>  
  <section id='107716424'>
    <h2>Palazzo Belimbau (Antoniotto Cattaneo)</h2>
  </section>  
  <section id='141533045'>
    <h2>Palazzo Durazzo-Pallavicini (G. Agostino Balbi)</h2>
  </section>  
  <section id='41725189'>
    <h2>Palazzo Gio Francesco Balbi</h2>
  </section> 
  <section id='41725188'>
    <h2>Palazzo Balbi-Senarega (Giacomo e Pantaleo Balbi)</h2>
  </section> 
  <section id='107714384'>
    <h2>Palazzo Francesco Balbi Piovera</h2>
  </section> 
  <section id='22978034'>
    <h2>Palazzo Reale (Stefano Balbi)</h2>
  </section> 
  <section id='164326908'>
    <h2>Palazzo Cosma Centurione</h2>
  </section> 
  <section id='164571806'>
    <h2>Palazzo Giorgio Centurione</h2>
  </section> 
  <section id='164571713'>
    <h2>Palazzo Gio Battista Centurione</h2>
  </section> 
  <section id='164326910'>
    <h2>Palazzo Cipriano Pallavicini</h2>
  </section> 
  <section id='164571807'>
    <h2>Palazzo Nicolò Spinola</h2>
  </section> 
  <section id='22985198'>
    <h2>Palazzo Spinola di Pellicceria (Francesco Grimaldi)</h2>
  </section> 
  <section id='76035022'>
    <h2>Palazzo Gio Battista Grimaldi</h2>
  </section> 
  <section id='164572586'>
    <h2>Palazzo Gio Battista Grimaldi</h2>
  </section> 
  <section id='164572591'>
    <h2>Palazzo Stefano De Mari</h2>
  </section> 
  <section id='76035010'>
    <h2>Palazzo Ambrogio De Nigro</h2>
  </section> 
  <section id='107718550'>
    <h2>Palazzo Emanuele Filiberto Di Negro</h2>
  </section> 
  <section id='23608493'>
    <h2>Palazzo De Marini Croce</h2>
  </section> 

</article>

</body>

<script>
var map = initmap(44.412,8.931,16, { zoomControl:false });
map.zoomControl=false;
var layer, layer2;
var select=0;

function onEachFeature(feature, layer) { }


layer=L.geoJson(test, {
    onEachFeature: onEachFeature,
     pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, { radius:2 });
    }
}).addTo(map);


var sections = document.getElementsByTagName('section');

var setActive = function(index, ease) {

  $.each(sections,function(i,s) { s.className = s.className.replace(' active', '') });
  
    sections[index].className += ' active';
      document.body.className = 'section-' + index;
      
    $.each(test.features, function(i,v) {
       
        if (v.properties['@id']==sections[index].id)
        {
            select=sections[index].id;
            if (typeof layer2!=="undefined")
            layer2.clearLayers();
            
            layer2=L.geoJson(test, {
                onEachFeature: onEachFeature,
                 pointToLayer: function (feature, latlng) {
                    return L.circleMarker(latlng, { radius:2 });
                },
                filter: function(feature, layer) {
                            if (feature.properties["@id"]==select)
                            {
                                 return true;
                            }
                            return false;
                        },
                 style: function(feature) {
                    if (feature.properties["@id"]==select)
                    {
                         return {color: "#ff0000"};
                    }

                 }
            }).addTo(map);
            

         var obj;
            if (v.geometry.type!="MultiPolygon")  obj= $.geo.centroid(v.geometry);
            else
            {
            var temp={ type:"LineString", coordinates: v.geometry.coordinates[0][0]};
            obj=$.geo.centroid(temp);
            }
            
            var res=swap(obj.coordinates);

            map.panTo(res);
            map.setZoom(17);
        }
    });

      return true;
};
;
window.onscroll = $.debounce(function() {
  // IE 8
  if (window.pageYOffset === undefined) {
    var y = document.documentElement.scrollTop;
    var h = document.documentElement.clientHeight;
  } else {
    var y = window.pageYOffset;
    var h = window.innerHeight;
  }

  if (y === 0) return setActive(0, true);

  var memo = 0;
  var buffer = (h * 0.3333);

  var active = _(sections).any(function(el, index) {
    memo += el.offsetHeight;
    return y < (memo-buffer) ? setActive(index, true) : false;
  });


  if (!active) setActive(sections.length - 1, true);
},10);


setActive(0, false);

</script>
